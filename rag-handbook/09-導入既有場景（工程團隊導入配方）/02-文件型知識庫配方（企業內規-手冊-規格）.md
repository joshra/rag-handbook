# 02-文件型知識庫配方（企業內規 / 手冊 / 規格）

## 適用場景

- 內規、SOP、政策、產品規格、合約條款
- 需要引用（可追溯）與權限控制

## 起手式（推薦）

- 資料：先選「最常被問、更新頻率可控」的一批文件
- chunking：以標題/段落切分，保留 title_path、條款編號、頁碼
- 檢索：向量 + 全文（混合）→ rerank → top-n
- 生成：強制引用；證據不足就拒答/追問

## 你一定要做的 metadata

- tenant_id / ACL（部門/角色/機密等級）
- doc_id / doc_version / source_uri
- title_path / section / page

## 常見問答類型與對應策略

- 「某條規定是什麼？」→ 檢索條款段落 + 引用
- 「A 跟 B 有什麼差異？」→ 多路召回（A/B 章節）+ rerank + 比對輸出
- 「我可以…嗎？」→ 需要明確前提條件，證據不足要追問

## 除錯與提升

- 若常 retrieval miss：優先改 chunking/同義詞擴展/混合檢索
- 若常 generation 幻覺：加強引用規則、縮短 context、做拒答閾值

## 本章小結

- 文件型知識的重點在結構：標題路徑、條款編號、頁碼與例外條件要被保留。
- 混合檢索與 rerank 往往更穩，因為文件常有精確術語與編號需求。
- 引用是產品能力：能回到條款位置，才能支撐審計與使用者信任。

## 延伸閱讀

- [02-Chunking切分策略（大小-重疊-結構化文件）](../02-資料工程（最容易踩雷的地方）/02-Chunking切分策略（大小-重疊-結構化文件）.md)
- [01-Context組裝（packing）與引用格式](../05-生成策略（把答案變可靠）/01-Context組裝（packing）與引用格式.md)
