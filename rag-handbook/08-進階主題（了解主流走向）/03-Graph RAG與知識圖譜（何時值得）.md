# 03-Graph RAG 與知識圖譜（何時值得）

## 你將學到（Learning Objectives）

- 知道 Graph RAG 在解什麼問題：關係、路徑、可解釋推理
- 能判斷什麼時候值得投入（避免過早工程化）
- 知道常見導入方式：文件 → 實體/關係抽取 → 圖譜查詢 → 證據回填

## 本章地圖

- **適合用在**：問題需要跨文件關聯、實體關係或多跳查詢時。
- **你會做出**：何時值得建圖譜、以及與向量檢索的組合策略。
- **最可能踩雷**：為了酷而上圖譜；資料治理與更新成本被低估。

## Graph RAG 是什麼

它通常把知識表示為：

- **實體（Entity）**：人、系統、產品、流程節點、條款
- **關係（Relation）**：依賴、包含、適用、衝突、版本演進

回答問題時：
- 先在圖上找到相關實體/關係（圖查詢）
- 再把對應的原文證據（chunk）取回給 LLM 生成（仍要 grounding）

## 什麼時候值得

- 你的問題是「關係型」：依賴/影響範圍/責任歸屬/流程路徑
- 你的資料有明確結構：系統關聯、服務依賴圖、規範條款間引用
- 你需要更強可解釋性：為什麼得出這個結論（路徑可展示）

## 什麼時候不值得（先別做）

- 主要需求是「找文件段落」或「FAQ」：一般 RAG 就足夠
- 你沒有資料治理與標註能力：圖譜品質很容易失控
- 你沒有可維運的圖資料庫/查詢能力（工程成本高）

## 務實導入順序

1. 先把一般 RAG 做穩（chunking/metadata/filters/rerank/評估）
2. 找出真正需要「關係推理」的問題集
3. 針對少數高價值領域做 graph（不要一開始全做）

## 本章小結

- Graph RAG 的價值在關聯推理與可解釋的關係路徑，但建置與維護成本高。
- 先用 metadata/結構化欄位解掉 80% 關聯需求，再評估是否上圖譜。
- 圖譜與向量常是互補：圖譜提供關聯範圍，向量提供語意匹配。

## 延伸閱讀

- [03-Metadata與權限欄位設計（ACL-租戶隔離）](../02-資料工程（最容易踩雷的地方）/03-Metadata與權限欄位設計（ACL-租戶隔離）.md)
- [03-混合檢索（BM25+向量）與何時要用](../03-檢索基礎（向量化-索引-混合檢索）/03-混合檢索（BM25+向量）與何時要用.md)
