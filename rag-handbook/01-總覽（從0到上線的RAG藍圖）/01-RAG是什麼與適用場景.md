# 01-RAG 是什麼與適用場景

## 你將學到（Learning Objectives）

- 能用一句話解釋 **RAG 在系統裡做了什麼**
- 能判斷你的需求是「需要 RAG」還是「其實只要搜尋/FAQ/規則」
- 能把需求轉成可量化的成功標準（KPI / SLO）

## 本章地圖

- **適合用在**：要判斷是不是該用 RAG、用在哪些問題類型時。
- **你會做出**：場景判斷準則與最小可行的系統邊界。
- **最可能踩雷**：把「需要推理/需要外部事實」混在一起，導致誤用 RAG。

## 一句話定義

**RAG = 先檢索找證據，再用 LLM 依證據生成答案（最好附引用）。**

它把 LLM 從「憑參數記憶回答」拉回到「以企業/團隊文件為依據回答」。

## 什麼時候適合用 RAG

- **知識會更新**：制度、流程、產品規格、FAQ 會變動，不能等模型訓練/微調
- **答案需要可追溯**：必須提供來源或引用（例如內規、合約、技術規格）
- **文件量大且分散**：散落在多處（wiki、PDF、PRD、設計文、SOP）
- **工程團隊要可控**：要能透過檢索與資料治理去「迭代變準」

## 什麼時候不一定需要 RAG

- **問題本質是結構化查詢**：例如「查某客戶最近 30 天交易」→ 應該走 DB/報表
- **答案可以寫死或規則化**：小型 FAQ、固定流程 → 先做搜尋/FAQ，成本更低
- **你沒有資料治理能力**：來源不可信、沒有版本、權限不清楚 → 先把資料管起來

## RAG 的常見誤區

- **把 RAG 當成模型本身**：其實 RAG 是一個「檢索 + 生成」的系統設計
- **只追求向量相似度**：真正決定可用性的是切分、metadata、rerank、評估與觀測
- **沒有不可回答策略**：這會讓系統在證據不足時仍硬答，造成信任崩壞

## 最小可行 RAG（MVP）長什麼樣

- **資料**：一批「你真的需要回答的」中文文件（先 50～500 篇也可以）
- **切分**：每段 200～500 中文字左右（視文件結構調整）
- **向量庫**：Postgres + pgvector（先求可落地）
- **檢索**：top-k + metadata filter（權限/租戶/文件類型）
- **生成**：引用來源 + 證據不足就拒答/追問
- **觀測**：每次問答都能回溯到：query、候選 chunks、最終引用、耗時與成本

## 本章小結

- RAG 適合「答案依賴可追溯資料」且資料會變動的問題，而非純常識或純推理。
- 成功的關鍵不是向量庫，而是資料工程、權限與可回放的治理能力。
- 先把不可回答與澄清策略納入設計，避免上線後硬答造成風險。

## 延伸閱讀

- [03-成功標準與KPI（正確率-覆蓋率-成本-延遲）](03-成功標準與KPI（正確率-覆蓋率-成本-延遲）.md)
- [02-Prompt模板（可回答-不可回答-追問澄清）](../05-生成策略（把答案變可靠）/02-Prompt模板（可回答-不可回答-追問澄清）.md)
- [02-FAQ（常見誤解與坑）](../10-附錄/02-FAQ（常見誤解與坑）.md)
