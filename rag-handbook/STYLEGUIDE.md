# RAG 手冊寫作規範（O’Reilly 動物書風格對齊）

本文件用來把整份手冊整理成「歐萊禮技術書」常見的閱讀節奏：**每章有固定骨架、清楚的主線敘事、可被工程團隊拿去做決策與實作**。  
（註：我們不複製版面設計，而是對齊其「內容結構與語氣」。）

## 章節骨架（所有章節一致）

每章至少包含以下區塊（順序固定，讀者會建立肌肉記憶）：

- **`# <章名>`**：標題只說「你要解的問題」。
- **`## 你將學到（Learning Objectives）`**：3–6 點，都是可驗收的能力。
- **`## 本章地圖`**：三行就好，讓讀者知道值不值得繼續讀。
  - **適合用在**：情境與前提
  - **你會做出**：可交付物 / 介面 / 流程
  - **最可能踩雷**：1–3 個高頻坑
- **主文（多個 `##` / `###`）**：以「先講結論 → 展開理由 → 給起手式 → 說例外」的節奏寫。
- **`## 本章小結`**：5–9 點「可操作結論」，以工程語言表達（參數、流程、責任邊界、風險）。
- **`## 延伸閱讀`**：3–7 項，優先放：
  - 本手冊其他章節（可串成讀書會路徑）
  - 官方文件（Postgres、pgvector、FTS、框架 docs）
  - 關鍵術語（回去查名詞表）

## 語氣與敘事（更像 O’Reilly）

- **用肯定句寫決策**：例如「權限必須在檢索層做 filter」，避免模糊語氣。
- **先給起手式**：每個策略都要給「能直接採用」的初始參數/流程，再談調整。
- **把例外寫清楚**：不是為了完整，而是為了避免上線踩雷（成本、延遲、越權）。
- **把責任邊界寫成可交付**：每章都要能對應到工件（schema、API、流程、指標）。

## 側欄（Sidebars）與警示（Callouts）

本手冊使用 GitHub 風格的 admonitions，固定用法如下：

```md
> [!NOTE]
> **概念**：用一句話定義名詞或上下文。

> [!TIP]
> **起手式**：給可直接採用的參數/流程/預設值。

> [!WARNING]
> **上線風險**：越權、資料外洩、成本失控、延遲暴增、不可回放等。

> [!CAUTION]
> **常見誤解**：讀者很容易做錯，但做錯後代價很大。
```

規則：

- 側欄只放「中斷主線也值得看」的內容；不要把主文塞進側欄。
- 一個側欄最多 6 行，超過就該回主文或拆章節。

## 連結與引用

- 內部連結一律用相對路徑（方便搬移與離線閱讀）。
- 提到資料來源時，優先使用「文件名 / 章節 / 頁碼 / URL」的可追溯格式。
- 若章節涉及引用規則，以 `05-生成策略/01-Context組裝（packing）與引用格式.md` 為準。

## 名詞一致性

- 名詞優先以 `00-導讀/01-名詞表與縮寫.md` 為準。
- 同一概念只用一個詞；必要時在章內第一次出現加括號英文。

